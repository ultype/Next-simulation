#!/bin/bash

if [ "$1" = "--help" ]; then
  echo "Please export the following required variables before running this script:"
  echo ""
  echo "CC:                   Set to the target specific compiler command."
  echo "PATH_TO_LIBCIFX:      Set to path where the libcifx is located"
  echo "                         default: set to '../../driver/libcifx/src/.libs/'"
  echo "PATH_TO_INCCIFX:      Set to path where the libcifx is located"
  echo "                         default: set to '../../driver/libcifx/src,../../driver/libcifx/src/Toolkit'"
  echo ""
  echo "NOTE: Multiple (include) paths can be given via comma separated list."
  echo "      For more options run the provided configure script directly."
  exit
fi

if [ -n $1 ]; then
  USER_PARAM=$1
fi

if [ -z $PATH_TO_LIBCIFX ]; then
  PATH_TO_LIBCIFX="../../driver/libcifx/src/.libs/"
fi
if [ -z $PATH_TO_INCCIFX ]; then
  PATH_TO_INCCIFX="../../driver/libcifx/src,../../driver/libcifx/src/Toolkit"
fi

OIFS=$IFS;
IFS=",";

#cifx lib
TMP_CIFX_CFLAGS=""
for TMP in ${PATH_TO_INCCIFX}
do
	TMP_CIFX_CFLAGS="${TMP_CIFX_CFLAGS} -I${TMP}"
done
TMP_CIFX_LIBS="-L${PATH_TO_LIBCIFX}"

IFS=$OIFS;

make CFLAGS="${TMP_CIFX_CFLAGS}" LIBS="${TMP_CIFX_LIBS}"

